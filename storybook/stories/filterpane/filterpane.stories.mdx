import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import Filterpane from './filterpane';

<Meta
  title="Filterpane/FilterPane"
  parameters={{
    viewMode: 'docs',
  }}
/>

# Fusion Filterpane components

These components are build to cover common use cases for a general filter panel.
The components are build to work interchangeably, as inspiration or something to build off of.

export const Pane = (args) => {
  return <Filterpane {...args} />;
};

<Story name="Filterpane" args={{ amount: 12 }}>
  {Pane}
</Story>

The above filterpane is structed in code like this :

```jsx
<FilterProvider initialData={data} initialFilters={{ status: 'all', firstName: [] }}>
  <FilterPanel>
    <GeneralBar onMinimize={() => setMinimized((s) => !s)} minimized={minimized} searchFilterFn={searchFilterFn} />
    <FilterSection isMinimized={minimized} useFilterSelector>
      <CheckBoxFilter filter={{ ...firstNameCheck }} useSelectAll useSearch />
      <CheckBoxFilter filter={{ ...lastNameCheck }} useSelectAll useSearch />
      <CheckBoxFilter filter={{ ...ageCheck }} useSelectAll useSearch />
      <RadioFilter filter={statusRadio} />
    </FilterSection>
  </FilterPanel>
</FilterProvider>
```

#### FilterProvider

the filter provider is the only give component in this hierarchy. It provides the context that is used in all the other components.
`initialData` is our dataset.
`initialFilters` set a default filter state on load. Here we have added an object for status and firstName.
These are then added to `selections$`. This is why the they are set as `selected` in the Filter Categories.
status also set to `all`, this is why all is the selected radio.
If names was added to the `firstName` object, they would also be selected.

#### FilterPanel

A simple container panel with no acutal features to it. just some styling making this a horizontal flowing FilterPanel.

#### GeneralBar

A general purpose bar that gives some basic features.
It has a `search bar` that searches and filters the dataset based on the supplied searchFilterFn.
`onMinimize` and `minimized` is used for the Hide/Show filter button. In this scenario the minimized state will hide the FilterSection.
`Clear filters` clears all the filter selections. This functionality comes from the FilterProvider.
When minimized The bar will show a set of chips as a summary of your selection, if any are done.
The bar will handle `children` if added. They will flowa after the buttons/chips.

#### FilterSections

This area holds all the filter controllers we have added.
if you implement `useFilterSelector`, you will se the Filter Categories box.
In the Filter Categories you can see the filters that are registered.
If you check one of the filters they will show up in the area to the right.
The selector uses the initialFilters to decide which filters should show up on load.
If no initialFilters given, are will be empty.
A filter marked as `mandatory`, will be show, but disabled. As seen with the `status` filter.

If `useFilterSelector` is not used. All registered filters will be shown at all times.

Using `useFilterSelector` is handy when you have large dataset and many filter categories.
Since all categories needs to be recalculated with each selection, performance can become an issue.

#### CheckBoxFilter

A standard filter controller using checkboxes.
Expects its selections to be an array.
`filter` takes in an Filter object that has all the necessary setup (see filter settings).
`useSelectAll` add a button on top of the options, that (de)selects all options.
use full when there are many options, and user want to remove just a few options.
`useSearch` adds a search bar to the filter. This searches within the filter options.
Use for a user to find a specific options, when there are many options.

filter options are dynamic and will populate when doing selection in other filters.
If the counter hits 0, the options will disappear.
It can happen that a selected option has a 0 counter. These will still show, for clarity.

#### RadioFilter

a standard filter controller using radio button.
Expects its selection to be a singular `string`.  
`filter` is the same object as in Checkboxes (see filter settings)
`useSearch` adds a search bar to the filter. This searches within the filter options.
Use for a user to find a specific options, when there are many options.

Filter options are not dynamic. Meaning they will not be added removed based on the other filters.
