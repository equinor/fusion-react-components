import { Meta, Story, Canvas, ArgsTable, Description } from '@storybook/addon-docs';
import { TextInput, TextInputProps } from '@equinor/fusion-react-textinput';
import { iconNames } from '@equinor/fusion-wc-icon';

import Template from './TextInput.template';
import readme from '@equinor/fusion-react-textinput/README.md';

export const Container = ({column, children}) => (
  <div style={{display: 'flex', flexFlow: column ? 'column': 'row', gap: 10}}>
    {children}
  </div>
); 

<Meta
  title="Input/TextInput"
  component={Template}
  parameters={{
    viewMode: 'docs',
  }}
  argTypes={{
    icon: {
      control: 'select',
      options: iconNames,
    },
  }}
/>

<Description markdown={readme} title="Input/TextInput/readme" />

## Playground

<Canvas>
  <Story name="Playground" parameters={{chromatic: { disableSnapshot: true }}} args={{label:'Playground'}} >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Playground" />

## SnapShots

### Default

<Story name="Default" args={{
    label: 'Default',
    validityTransform: (message, nativeValidity) => {
      return { valid: false };
    },
}}>{
  args => (
    <Container column>
      <Container>
        <Template {...args} />
        <Template {...args} value="Fusion"/>
      </Container>
      <Container>
        <Template {...args} disabled/>
        <Template {...args} value="Fusion" disabled/>
      </Container>
    </Container>
  )
}</Story>

### Validation

<Story name="Required" args={{
    label: 'Required', 
    required: true,
    pattern: "[0-9]",
    validationMessage:"Input must be a number between 0-9!",
    autoValidate: true,
  }}>{
  args => (
    <Container column>
      <Container>
        <Template {...args} />
        <Template {...args} value="Fusion"/>
        <Template {...args} validateOnInitialRender value="Fusion" label="validateOnInitialRender" />
      </Container>
      <Container>
        <Template {...args} disabled/>
        <Template {...args} value="Fusion" disabled/>
        <Template {...args} validateOnInitialRender value="Fusion" label="validateOnInitialRender" disabled/>
      </Container>
    </Container>
  )
}</Story>

### Helper

<Story name="Helper" args={{
  label:"Helper", 
  helper:"Helper Text" 
}}>{
  args => (
    <Container column>
      <Container>
        <Template {...args} />
        <Template {...args} helperPersistent/>
        <Template {...args} helperPersistent value="Fusion" />
      </Container>
      <Container>
        <Template {...args} disabled/>
        <Template {...args} helperPersistent disabled/>
        <Template {...args} helperPersistent value="Fusion" disabled/>
      </Container>
    </Container>
  )
}</Story>

### Icon

<Story name="Icon" args={{
  icon: "settings"
}}>{
  ({icon}) => (
    <Container column>
      <Container>
        <Template label="icon" icon={icon} />
        <Template label="icon" iconTrailing={icon}/>
      </Container>
      <Container>
        <Template label="icon trailing" icon={icon} disabled />
        <Template label="icon trailing" iconTrailing={icon} disabled/>
      </Container>
    </Container>
  )
}</Story>

### counter
<Story name="Counter" args={{
    label:"Character counter", 
    maxlength:10,
    charCounter: true,
    helper:"Helper Text", 
    helperPersistent: true, 
}}>{
  args => (
    <Container column>
      <Container>
        <Template {...args} />
        <Template {...args} value="Fusion"/>
      </Container>
      <Container>
        <Template {...args} disabled/>
        <Template {...args} value="Fusion" disabled/>
      </Container>
    </Container>
  )
}</Story>
